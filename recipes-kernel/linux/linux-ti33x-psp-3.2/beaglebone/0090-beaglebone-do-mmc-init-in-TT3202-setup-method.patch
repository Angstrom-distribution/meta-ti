From 5d154f033e5684cdadc1c6b3f54df5aa1537fc3b Mon Sep 17 00:00:00 2001
From: Koen Kooi <koen@dominion.thruhere.net>
Date: Tue, 11 Sep 2012 11:41:36 +0200
Subject: [PATCH 90/90] beaglebone: do mmc init in TT3202 setup method

Signed-off-by: Koen Kooi <koen@dominion.thruhere.net>
---
 arch/arm/mach-omap2/board-am335xevm.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/board-am335xevm.c b/arch/arm/mach-omap2/board-am335xevm.c
index f824d9f..dc62ba2 100644
--- a/arch/arm/mach-omap2/board-am335xevm.c
+++ b/arch/arm/mach-omap2/board-am335xevm.c
@@ -3271,6 +3271,11 @@ static void beaglebone_cape_setup(struct memory_accessor *mem_acc, void *context
 	}
 	
 	if (!strncmp("TT3201-001", cape_config.partnumber, 10)) {
+		beaglebone_skip_mmc0_init = 1;
+
+		pr_info("BeagleBone cape: initializing mmc");
+		mmc0_init(0,0);
+
 		pr_info("BeagleBone cape: initializing CAN cape\n");
 		tt3201_init(0,0);
 	}
-- 
1.7.7.6

