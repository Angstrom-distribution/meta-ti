From 6139bf8882b21669eea7b32a8fef7a0e8393feb4 Mon Sep 17 00:00:00 2001
From: Koen Kooi <koen@dominion.thruhere.net>
Date: Tue, 11 Sep 2012 11:41:36 +0200
Subject: [PATCH 089/102] beaglebone: do mmc init in TT3202 setup method

Signed-off-by: Koen Kooi <koen@dominion.thruhere.net>
---
 arch/arm/mach-omap2/board-am335xevm.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/arch/arm/mach-omap2/board-am335xevm.c b/arch/arm/mach-omap2/board-am335xevm.c
index 158cb85..438e51f 100644
--- a/arch/arm/mach-omap2/board-am335xevm.c
+++ b/arch/arm/mach-omap2/board-am335xevm.c
@@ -3156,6 +3156,11 @@ static void beaglebone_cape_setup(struct memory_accessor *mem_acc, void *context
 	}
 	
 	if (!strncmp("TT3201-001", cape_config.partnumber, 10)) {
+		beaglebone_skip_mmc0_init = 1;
+
+		pr_info("BeagleBone cape: initializing mmc");
+		mmc0_init(0,0);
+
 		pr_info("BeagleBone cape: initializing CAN cape\n");
 		tt3201_init(0,0);
 	}
-- 
1.8.1.4

