From 5f4a12f2ab8c8a686875434bc9d4d60af5b16866 Mon Sep 17 00:00:00 2001
From: Steve Kipisz <s-kipisz2@ti.com>
Date: Thu, 6 Oct 2011 15:57:45 -0500
Subject: [PATCH 1/1] Enable bit15 in the maccontrol register for 100Mbps.

---
 drivers/net/cpsw.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/net/cpsw.c b/drivers/net/cpsw.c
index 402d8f6..080388c 100644
--- a/drivers/net/cpsw.c
+++ b/drivers/net/cpsw.c
@@ -399,6 +399,8 @@ static void _cpsw_adjust_link(struct cpsw_slave *slave,
 			mac_control &= ~BIT(7);	/* TODO: Do not enable	*/
 			phy->speed = 100;	/* gig support now	*/
 		}
+		if (phy->speed == 100)
+			mac_control |= BIT(15);
 		if (phy->duplex)
 			mac_control |= BIT(0);	/* FULLDUPLEXEN	*/
 		if (phy->interface == PHY_INTERFACE_MODE_RGMII) /* RGMII */
-- 
1.7.2.3

